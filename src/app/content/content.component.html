<!-- content.component.html -->
<header class="flex justify-between w-full border-b border-gray-300 px-8 py-4 gap-8 text-black bg-white">
  <div class="flex gap-2 items-center">
    <img src="assets/logo1.png" alt="logo" class="h-8 w-8 object-contain" />
    <span class="text-lg relative group cursor-pointer">
      SBDRS
      <span
        class="absolute mt-2 w-80 bg-white text-black text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 text-center"
        style="top:100%; left:-110px;"
      >
        Semantic Based Document Retrieval System
      </span>
    </span>
  </div>
  <div class="flex-1 flex justify-center items-center">
    <span class="font-bold text-xl flex items-center gap-2">
      Content
    </span>
  </div>
</header>

<div *ngIf="isLoading" class="fixed inset-0 flex items-center justify-center bg-white bg-opacity-70 z-50">
  <div class="flex flex-col items-center">
    <div class="loader mb-4"></div>
    <div class="text-blue-600 font-semibold">Generating insights, please wait...</div>
  </div>
</div>

<div class="p-4 bg-white min-h-screen">
  <div class="mt-4 p-4 bg-white shadow-[0_8px_40px_0_rgba(0,0,0,0.35)] rounded-lg">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-lg font-semibold">Results</h2>
      <div *ngIf="totalPages > 1" class="flex items-center space-x-2">
        <button
          class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"
          [disabled]="page === 1"
          (click)="goToPage(page - 1)">
          Prev
        </button>
        <span>Page {{ page }} of {{ totalPages }}</span>
        <button
          class="px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"
          [disabled]="page === totalPages"
          (click)="goToPage(page + 1)">
          Next
        </button>
      </div>
    </div>
    <div class="mt-4 border border-black rounded-lg overflow-hidden">
      <table class="w-full border-collapse table-fixed border border-black">
        <thead>
          <tr class="bg-white">
            <th class="p-2 border border-black w-1/3">Title</th>
            <th class="p-2 border border-black w-1/3">Insights</th>
            <th class="p-2 border border-black w-1/3">
              Similarity Score
              <span title="How closely this document matches your query. 100% means highly relevant."></span>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let document of paginatedDocuments" class="border border-black">
            <td class="p-4 border border-black">
              <a [routerLink]="['/summary', document.id]" class="text-blue-600 hover:text-blue-800">{{ document.title }}</a>
            </td>
            <td class="p-4 border border-black">
              {{ insights[document.id] }}
            </td>
            <td class="p-4 border border-black text-center"
                [ngClass]="{
                  'bg-green-200 font-bold': document.similarity >= 0.8,
                  'bg-yellow-100': document.similarity >= 0.6 && document.similarity < 0.8
                }">
              {{ (document.similarity * 100) | number:'1.0-2' }}%
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="!isLoading && documents.length === 0 && !errorMessage" class="text-center text-gray-500">
      Query not found. Please try a different search term.
    </div>
    <div *ngIf="errorMessage" class="text-center text-red-500 mt-4">{{ errorMessage }}</div>
  </div>
</div>